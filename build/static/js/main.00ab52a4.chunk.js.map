{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["urlBase","Filter","searchedName","handleSearch","type","value","onChange","PersonForm","newName","newNumber","handleChangeName","handleChangeNumber","handleSubmit","onSubmit","Persons","persons","handleDelete","map","person","name","phone","onClick","filter","toLowerCase","match","trim","App","useState","setPersons","setNewName","setNewNumber","setSearchedName","confirmationMessage","setConfirmationMessage","useEffect","axios","get","then","response","data","className","event","console","log","preventDefault","target","newPerson","newPersonToAdd","alredyInPersonsIndex","some","index","window","confirm","put","id","prevPersons","setTimeout","post","concat","personToDelete","personId","delete","status","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.00ab52a4.chunk.js","sourcesContent":["import axios from \"axios\"\r\n\r\n// const urlBase = 'https://jsonplaceholder.typicode.com/users'\r\nconst urlBase = '/api/persons'\r\n\r\nexport const getAllPersons = () => {\r\n    return axios.get(urlBase)\r\n        .then(response => {\r\n        const { data } = response\r\n        return data\r\n    })\r\n}\r\n\r\nexport const createPerson = (newPerson) => {\r\n    return axios.post(urlBase, newPerson)\r\n        .then( response => {\r\n            const { data } = response\r\n            return data\r\n        })\r\n}\r\n\r\nexport const deletePerson = (personId) => {\r\n    return axios.delete(`${urlBase}/${personId}`)\r\n        .then( response => response)\r\n}\r\n\r\nexport const updatePerson = (person) => {\r\n    return axios.put(`${urlBase}/${person.id}`, person)\r\n        .then(response => {\r\n            const { data } = response\r\n            return data\r\n        })\r\n}","import React, { useEffect, useState } from 'react'\nimport { createPerson, deletePerson, getAllPersons, updatePerson } from './services/persons';\n\nconst Filter = ({searchedName, handleSearch}) => {\n  return (\n    <div>\n      filter shown with: <input type='text' value={searchedName} onChange={handleSearch} />\n    </div>\n  )\n}\n\nconst PersonForm = ({newName, newNumber, handleChangeName, handleChangeNumber, handleSubmit}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n    <div>\n      name: <input type='text' value={newName} onChange={handleChangeName} />\n    </div>\n    <div>number: <input type='text' value={newNumber} onChange={handleChangeNumber} /></div>\n    <div>\n      <button type=\"submit\" >add</button>\n    </div>\n  </form>\n  )\n}\n\nconst Persons = ({persons, searchedName, handleDelete}) => {\n\n  return (\n    searchedName === '' ? \n    persons.map(person => {\n        return(\n          <p key={person.name}>\n            <span>{person.name} </span>\n            <span>{person.phone} </span>\n            <button onClick={handleDelete(person)}>Delete</button>\n          </p>\n        )\n      }) : persons.filter(person => person.name.toLowerCase().match(searchedName.toLowerCase().trim())).map( person => {\n            return(\n              <p key={person.name}>\n                <span>{person.name} </span>\n                <span>{person.phone} </span>\n                <button onClick={handleDelete(person)}>Delete</button>\n              </p>\n            )\n          })\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchedName, setSearchedName ] = useState('')\n  const [ confirmationMessage, setConfirmationMessage] = useState('')\n\n  useEffect(() => {\n    getAllPersons()\n      .then( persons => {\n        setPersons(persons)\n      })\n  }, []) \n\n  const handleChangeName = (event) => {\n    setNewName(event.target.value)\n  } \n\n  const handleChangeNumber = (event) => {\n    setNewNumber(event.target.value)\n  } \n\n  const handleSearch = (event) => {\n    console.log('Handle search');\n    event.preventDefault()\n    setSearchedName(event.target.value)\n  } \n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    let newPersonToAdd = {\n      name: newName.trim(),\n      phone: newNumber.trim()\n    }\n\n    let alredyInPersonsIndex = -1\n\n    if (!persons.some( (person, index) => {\n      alredyInPersonsIndex = index\n      return person.name.toLowerCase() === newName.toLowerCase()\n    })) {\n      createPerson(newPersonToAdd)\n        .then( newPerson => {\n          setPersons(prevPersons => prevPersons.concat(newPerson))\n          setConfirmationMessage(`Added ${newPerson.name}`)\n          setTimeout(() => {\n            setConfirmationMessage('')\n          }, 5000)\n        })\n\n\n      }else {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        newPersonToAdd = {...persons[alredyInPersonsIndex], phone: newNumber}\n        updatePerson(newPersonToAdd)\n          .then( newPerson => {\n            setPersons(prevPersons => prevPersons.map(person => person.id === newPerson.id ? newPerson : person))\n            setConfirmationMessage(`Updated ${newPerson.name}`)\n            setTimeout(() => {\n              setConfirmationMessage('')\n            }, 5000)\n          })\n      }\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const handleDelete = (personToDelete) => {\n    return () => {\n      deletePerson(personToDelete.id)\n        .then( response => {\n          if (response.status === 200 || response.status === 204) {\n            setPersons(persons.filter(person => person.id !== personToDelete.id))\n            return alert(`${personToDelete.name} deleted correctly`)\n          }\n        }) \n    }\n  }\n \n  return (\n    <div>\n      <h1>Phonebook</h1>\n      {confirmationMessage ? <div className='message'>{confirmationMessage}</div> : null}\n      <Filter searchedName={searchedName} handleSearch={handleSearch}/>\n      <h2>Add a new</h2>\n      <PersonForm newName={newName} newNumber={newNumber}  handleChangeName={handleChangeName} handleChangeNumber={handleChangeNumber} handleSubmit={handleSubmit} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} searchedName={searchedName} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}