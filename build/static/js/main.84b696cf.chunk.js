(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(15),r=n.n(a),o=n(6),i=n(3),u=n(4),s=n.n(u),h="/api/persons",d=n(0),j=function(e){var t=e.searchedName,n=e.handleSearch;return Object(d.jsxs)("div",{children:["filter shown with: ",Object(d.jsx)("input",{type:"text",value:t,onChange:n})]})},l=function(e){var t=e.newName,n=e.newNumber,c=e.handleChangeName,a=e.handleChangeNumber,r=e.handleSubmit;return Object(d.jsxs)("form",{onSubmit:r,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{type:"text",value:t,onChange:c})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{type:"text",value:n,onChange:a})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var t=e.persons,n=e.searchedName,c=e.handleDelete;return""===n?t.map((function(e){return Object(d.jsxs)("p",{children:[Object(d.jsxs)("span",{children:[e.name," "]}),Object(d.jsxs)("span",{children:[e.phone," "]}),Object(d.jsx)("button",{onClick:c(e),children:"Delete"})]},e.name)})):t.filter((function(e){return e.name.toLowerCase().match(n.toLowerCase().trim())})).map((function(e){return Object(d.jsxs)("p",{children:[Object(d.jsxs)("span",{children:[e.name," "]}),Object(d.jsxs)("span",{children:[e.phone," "]}),Object(d.jsx)("button",{onClick:c(e),children:"Delete"})]},e.name)}))},m=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),m=u[0],f=u[1],p=Object(c.useState)(""),O=Object(i.a)(p,2),x=O[0],v=O[1],w=Object(c.useState)(""),N=Object(i.a)(w,2),g=N[0],C=N[1],S=Object(c.useState)(""),k=Object(i.a)(S,2),y=k[0],D=k[1],L=Object(c.useState)(""),T=Object(i.a)(L,2),A=T[0],E=T[1];Object(c.useEffect)((function(){s.a.get(h).then((function(e){return e.data})).then((function(e){a(e)}))}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Phonebook"}),y?Object(d.jsx)("div",{className:"message",children:y}):null,A?Object(d.jsx)("div",{className:"error",children:A}):null,Object(d.jsx)(j,{searchedName:g,handleSearch:function(e){console.log("Handle search"),e.preventDefault(),C(e.target.value)}}),Object(d.jsx)("h2",{children:"Add a new"}),Object(d.jsx)(l,{newName:m,newNumber:x,handleChangeName:function(e){f(e.target.value)},handleChangeNumber:function(e){v(e.target.value)},handleSubmit:function(e){e.preventDefault();var t,c,r={name:m.trim(),phone:x.trim()},i=-1;n.some((function(e,t){return i=t,e.name.toLowerCase()===m.toLowerCase()}))?window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))&&(r=Object(o.a)(Object(o.a)({},n[i]),{},{phone:x}),(t=r,s.a.put("".concat(h,"/").concat(t.id),{phone:t.phone}).then((function(e){return e.data}))).then((function(e){a((function(t){return t.map((function(t){return t.id===e.id?e:t}))})),D("Updated ".concat(e.name)),setTimeout((function(){D("")}),5e3)})).catch((function(e){E(e.response.data.error),setTimeout((function(){E("")}),5e3)}))):(c=r,s.a.post(h,c).then((function(e){return e.data}))).then((function(e){a((function(t){return t.concat(e)})),D("Added ".concat(e.name)),setTimeout((function(){D("")}),5e3)})).catch((function(e){E(e.response.data.error),setTimeout((function(){E("")}),5e3)})),f(""),v("")}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(b,{persons:n,searchedName:g,handleDelete:function(e){return function(){var t;(t=e.id,s.a.delete("".concat(h,"/").concat(t)).then((function(e){return e}))).then((function(t){if(200===t.status||204===t.status)return a(n.filter((function(t){return t.id!==e.id}))),alert("".concat(e.name," deleted correctly"))}))}}})]})};n(39);r.a.render(Object(d.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.84b696cf.chunk.js.map